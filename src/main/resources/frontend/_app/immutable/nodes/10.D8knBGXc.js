import{s as U,e as b,z as j,a as x,c as _,b as $,A,f as p,d as E,h as B,i as y,j as h,n as C,C as T,o as z,g as O,m as D,q as m}from"../chunks/scheduler.D8LZMvHv.js";import{S as H,i as J}from"../chunks/index._RhZMLpL.js";import{r as k,u as L,b as M,n as G,s as K,q as Q,c as W,g as X,i as Y}from"../chunks/store.vHEsTG-8.js";import{w as q}from"../chunks/index.CkfCY_Fd.js";import{g as S}from"../chunks/entry.B-t78GaU.js";import{B as Z}from"../chunks/constants.BWkPU7VE.js";function N(l){let t,n="Results are submitted any moment...";return{c(){t=b("p"),t.textContent=n},l(s){t=_(s,"P",{"data-svelte-h":!0}),O(t)!=="svelte-fv6od1"&&(t.textContent=n)},m(s,r){y(s,t,r)},d(s){s&&p(t)}}}function I(l){let t,n="Results are submitted";return{c(){t=b("p"),t.textContent=n},l(s){t=_(s,"P",{"data-svelte-h":!0}),O(t)!=="svelte-1vhx32l"&&(t.textContent=n)},m(s,r){y(s,t,r)},d(s){s&&p(t)}}}function P(l){let t,n,s,r;return{c(){t=b("button"),n=j("Next round"),this.h()},l(u){t=_(u,"BUTTON",{class:!0});var f=$(t);n=A(f,"Next round"),f.forEach(p),this.h()},h(){B(t,"class","btn btn-primary mt-5  svelte-10exnw4"),t.disabled=et},m(u,f){y(u,t,f),h(t,n),s||(r=D(t,"click",l[5]),s=!0)},p:C,d(u){u&&p(t),s=!1,r()}}}function tt(l){let t,n,s=l[4]()+"",r,u,f,c,i=!l[0]&&N(),a=l[0]&&I(),e=l[1]&&P(l);return{c(){t=b("div"),n=b("h1"),r=j(s),u=x(),i&&i.c(),f=x(),a&&a.c(),c=x(),e&&e.c(),this.h()},l(d){t=_(d,"DIV",{class:!0});var o=$(t);n=_(o,"H1",{});var v=$(n);r=A(v,s),v.forEach(p),u=E(o),i&&i.l(o),f=E(o),a&&a.l(o),c=E(o),e&&e.l(o),o.forEach(p),this.h()},h(){B(t,"class","p-6 max-w-4xl mx-auto bg-base-200 rounded-xl shadow-md space-y-4")},m(d,o){y(d,t,o),h(t,n),h(n,r),h(t,u),i&&i.m(t,null),h(t,f),a&&a.m(t,null),h(t,c),e&&e.m(t,null)},p(d,[o]){d[0]?i&&(i.d(1),i=null):i||(i=N(),i.c(),i.m(t,f)),d[0]?a||(a=I(),a.c(),a.m(t,c)):a&&(a.d(1),a=null),d[1]?e?e.p(d,o):(e=P(d),e.c(),e.m(t,null)):e&&(e.d(1),e=null)},i:C,o:C,d(d){d&&p(t),i&&i.d(),a&&a.d(),e&&e.d()}}}let et=!1;function st(l,t,n){let s,r,u=q(!1);T(l,u,e=>n(1,r=e));let f=q(!1);T(l,f,e=>n(0,s=e));let c;k.subscribe(e=>{c=e}),z(async()=>{const e=m(L),d=m(M),o=m(G),v=m(K),R=m(Q),V=m(W),F=m(X)[c];c=m(k);try{const g=await fetch(`${Z}/addset`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,gamifiedElements:F,stai:d,ngse:o,sims:v,questions:R,answerTime:V})});if(!g.ok)throw new Error("Network response was not ok");const w=await g.json();f.set(!0),(w.round>0||w.round<3)&&(k.set(w.round),u.set(!0))}catch(g){console.error("Error uploading data:",g)}});function i(){return c<2?`End of study part ${c+1}`:"End of study, tank you for your participation"}return[s,r,u,f,i,async()=>{m(Y)?S("/avatars"):S("/questions")}]}class ut extends H{constructor(t){super(),J(this,t,st,tt,U,{})}}export{ut as component};
