import{s as Ze,e as s,b as _,D as We,d as a,f,j as r,i as b,k as e,l as L,o as $e,h as I,m as t,r as G,n as Ye,A as xe,E as ts,F as Zt,v as q,w as M,x as J}from"../chunks/scheduler.Du_WS53y.js";import{S as es,i as ss,c as as,b as ls,m as ns,t as os,a as rs,d as ds}from"../chunks/index.BEvaicvu.js";import{B as It}from"../chunks/constants.BWkPU7VE.js";import{T as is}from"../chunks/Toast.yQ2Aj9rA.js";function cs(v){let n,l,h="Admin Dashboard",m;function y(p,w){return p[2]?fs:vs}let x=y(v),u=x(v);return{c(){n=s("div"),l=s("h1"),l.textContent=h,m=_(),u.c(),this.h()},l(p){n=a(p,"DIV",{class:!0});var w=f(n);l=a(w,"H1",{class:!0,"data-svelte-h":!0}),I(l)!=="svelte-1rl1bgg"&&(l.textContent=h),m=b(w),u.l(w),w.forEach(r),this.h()},h(){e(l,"class","text-2xl font-bold mb-10"),e(n,"class","p-6 max-w-4xl mx-auto bg-base-200 rounded-xl shadow-md")},m(p,w){L(p,n,w),t(n,l),t(n,m),u.m(n,null)},p(p,w){x===(x=y(p))&&u?u.p(p,w):(u.d(1),u=x(p),u&&(u.c(),u.m(n,null)))},d(p){p&&r(n),u.d()}}}function us(v){let n,l,h,m,y="Admin Login",x,u,p,w,o,i,c="Login",d,V;return{c(){n=s("div"),l=s("div"),h=s("div"),m=s("h3"),m.textContent=y,x=_(),u=s("div"),p=s("input"),w=_(),o=s("div"),i=s("button"),i.textContent=c,this.h()},l(k){n=a(k,"DIV",{class:!0});var U=f(n);l=a(U,"DIV",{class:!0});var F=f(l);h=a(F,"DIV",{class:!0});var g=f(h);m=a(g,"H3",{class:!0,"data-svelte-h":!0}),I(m)!=="svelte-1mjvu17"&&(m.textContent=y),x=b(g),u=a(g,"DIV",{class:!0});var S=f(u);p=a(S,"INPUT",{type:!0,class:!0,placeholder:!0}),S.forEach(r),w=b(g),o=a(g,"DIV",{class:!0});var O=f(o);i=a(O,"BUTTON",{class:!0,"data-svelte-h":!0}),I(i)!=="svelte-yvwb2a"&&(i.textContent=c),O.forEach(r),g.forEach(r),F.forEach(r),U.forEach(r),this.h()},h(){e(m,"class","font-bold text-lg"),e(p,"type","password"),e(p,"class","input input-bordered w-full"),e(p,"placeholder","Enter password"),e(u,"class","py-4"),e(i,"class","btn btn-primary"),e(o,"class","modal-action"),e(h,"class","modal-box"),e(l,"class","modal modal-open"),e(n,"class","fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50")},m(k,U){L(k,n,U),t(n,l),t(l,h),t(h,m),t(h,x),t(h,u),t(u,p),Zt(p,v[4]),t(h,w),t(h,o),t(o,i),d||(V=[G(p,"input",v[16]),G(i,"click",v[13])],d=!0)},p(k,U){U&16&&p.value!==k[4]&&Zt(p,k[4])},d(k){k&&r(n),d=!1,xe(V)}}}function vs(v){let n,l,h="Statistics",m,y,x,u,p="Total Users",w,o,i,c,d,V,k,U="Ohne",F,g,S=v[1]._+"",O,P,j,K,C="P",D,H,B=v[1].p+"",Ut,$t,Q,dt,De="B",te,bt,Vt=v[1].b+"",St,ee,W,it,ye="L",se,mt,Et=v[1].l+"",jt,ae,X,ct,Te="A",le,Ct,kt=v[1].a+"",Nt,ne,Y,ut,Ie="N",oe,wt,gt=v[1].n+"",Lt,re,Z,vt,Ve="PBLA",de,xt,At=v[1].pbla+"",Ot,ie,$,ft,Ee="PBLAN",ce,Dt,Bt=v[1].pblan+"",Pt,ue,tt,ht,ke="Total",ve,yt,ge=v[14]()+"",fe,Ft,N,pt,Ae="Backup",he,et,Be="Download CSV",pe,st,Ue="Backup Data",_e,at,Se="Download DB file",zt,z,_t,je="Data Deletion",be,lt,R,me,nt,Ne="Delete Dataset",Ce,ot,Le="Delete All Data",we,Oe;return{c(){n=s("div"),l=s("h2"),l.textContent=h,m=_(),y=s("div"),x=s("div"),u=s("div"),u.textContent=p,w=_(),o=s("div"),i=q(v[0]),c=_(),d=s("div"),V=s("div"),k=s("div"),k.textContent=U,F=_(),g=s("div"),O=q(S),P=_(),j=s("div"),K=s("div"),K.textContent=C,D=_(),H=s("div"),Ut=q(B),$t=_(),Q=s("div"),dt=s("div"),dt.textContent=De,te=_(),bt=s("div"),St=q(Vt),ee=_(),W=s("div"),it=s("div"),it.textContent=ye,se=_(),mt=s("div"),jt=q(Et),ae=_(),X=s("div"),ct=s("div"),ct.textContent=Te,le=_(),Ct=s("div"),Nt=q(kt),ne=_(),Y=s("div"),ut=s("div"),ut.textContent=Ie,oe=_(),wt=s("div"),Lt=q(gt),re=_(),Z=s("div"),vt=s("div"),vt.textContent=Ve,de=_(),xt=s("div"),Ot=q(At),ie=_(),$=s("div"),ft=s("div"),ft.textContent=Ee,ce=_(),Dt=s("div"),Pt=q(Bt),ue=_(),tt=s("div"),ht=s("div"),ht.textContent=ke,ve=_(),yt=s("div"),fe=q(ge),Ft=_(),N=s("div"),pt=s("h2"),pt.textContent=Ae,he=_(),et=s("button"),et.textContent=Be,pe=_(),st=s("button"),st.textContent=Ue,_e=_(),at=s("button"),at.textContent=Se,zt=_(),z=s("div"),_t=s("h2"),_t.textContent=je,be=_(),lt=s("div"),R=s("input"),me=_(),nt=s("button"),nt.textContent=Ne,Ce=_(),ot=s("button"),ot.textContent=Le,this.h()},l(T){n=a(T,"DIV",{class:!0});var E=f(n);l=a(E,"H2",{class:!0,"data-svelte-h":!0}),I(l)!=="svelte-azhxon"&&(l.textContent=h),m=b(E),y=a(E,"DIV",{class:!0});var Pe=f(y);x=a(Pe,"DIV",{class:!0});var Ht=f(x);u=a(Ht,"DIV",{class:!0,"data-svelte-h":!0}),I(u)!=="svelte-1294wkw"&&(u.textContent=p),w=b(Ht),o=a(Ht,"DIV",{class:!0});var Fe=f(o);i=M(Fe,v[0]),Fe.forEach(r),Ht.forEach(r),Pe.forEach(r),c=b(E),d=a(E,"DIV",{class:!0});var A=f(d);V=a(A,"DIV",{class:!0});var Rt=f(V);k=a(Rt,"DIV",{class:!0,"data-svelte-h":!0}),I(k)!=="svelte-zzmv6o"&&(k.textContent=U),F=b(Rt),g=a(Rt,"DIV",{class:!0});var ze=f(g);O=M(ze,S),ze.forEach(r),Rt.forEach(r),P=b(A),j=a(A,"DIV",{class:!0});var qt=f(j);K=a(qt,"DIV",{class:!0,"data-svelte-h":!0}),I(K)!=="svelte-mx1950"&&(K.textContent=C),D=b(qt),H=a(qt,"DIV",{class:!0});var He=f(H);Ut=M(He,B),He.forEach(r),qt.forEach(r),$t=b(A),Q=a(A,"DIV",{class:!0});var Mt=f(Q);dt=a(Mt,"DIV",{class:!0,"data-svelte-h":!0}),I(dt)!=="svelte-8ufgmm"&&(dt.textContent=De),te=b(Mt),bt=a(Mt,"DIV",{class:!0});var Re=f(bt);St=M(Re,Vt),Re.forEach(r),Mt.forEach(r),ee=b(A),W=a(A,"DIV",{class:!0});var Gt=f(W);it=a(Gt,"DIV",{class:!0,"data-svelte-h":!0}),I(it)!=="svelte-1ogavsg"&&(it.textContent=ye),se=b(Gt),mt=a(Gt,"DIV",{class:!0});var qe=f(mt);jt=M(qe,Et),qe.forEach(r),Gt.forEach(r),ae=b(A),X=a(A,"DIV",{class:!0});var Jt=f(X);ct=a(Jt,"DIV",{class:!0,"data-svelte-h":!0}),I(ct)!=="svelte-mczi4p"&&(ct.textContent=Te),le=b(Jt),Ct=a(Jt,"DIV",{class:!0});var Me=f(Ct);Nt=M(Me,kt),Me.forEach(r),Jt.forEach(r),ne=b(A),Y=a(A,"DIV",{class:!0});var Kt=f(Y);ut=a(Kt,"DIV",{class:!0,"data-svelte-h":!0}),I(ut)!=="svelte-weytwq"&&(ut.textContent=Ie),oe=b(Kt),wt=a(Kt,"DIV",{class:!0});var Ge=f(wt);Lt=M(Ge,gt),Ge.forEach(r),Kt.forEach(r),re=b(A),Z=a(A,"DIV",{class:!0});var Qt=f(Z);vt=a(Qt,"DIV",{class:!0,"data-svelte-h":!0}),I(vt)!=="svelte-muzsn7"&&(vt.textContent=Ve),de=b(Qt),xt=a(Qt,"DIV",{class:!0});var Je=f(xt);Ot=M(Je,At),Je.forEach(r),Qt.forEach(r),ie=b(A),$=a(A,"DIV",{class:!0});var Wt=f($);ft=a(Wt,"DIV",{class:!0,"data-svelte-h":!0}),I(ft)!=="svelte-1ogvwxf"&&(ft.textContent=Ee),ce=b(Wt),Dt=a(Wt,"DIV",{class:!0});var Ke=f(Dt);Pt=M(Ke,Bt),Ke.forEach(r),Wt.forEach(r),ue=b(A),tt=a(A,"DIV",{class:!0});var Xt=f(tt);ht=a(Xt,"DIV",{class:!0,"data-svelte-h":!0}),I(ht)!=="svelte-1kl54e"&&(ht.textContent=ke),ve=b(Xt),yt=a(Xt,"DIV",{class:!0});var Qe=f(yt);fe=M(Qe,ge),Qe.forEach(r),Xt.forEach(r),A.forEach(r),E.forEach(r),Ft=b(T),N=a(T,"DIV",{class:!0});var rt=f(N);pt=a(rt,"H2",{class:!0,"data-svelte-h":!0}),I(pt)!=="svelte-3srbyo"&&(pt.textContent=Ae),he=b(rt),et=a(rt,"BUTTON",{class:!0,"data-svelte-h":!0}),I(et)!=="svelte-1yv1jzq"&&(et.textContent=Be),pe=b(rt),st=a(rt,"BUTTON",{class:!0,"data-svelte-h":!0}),I(st)!=="svelte-1wvxjj2"&&(st.textContent=Ue),_e=b(rt),at=a(rt,"BUTTON",{class:!0,"data-svelte-h":!0}),I(at)!=="svelte-1808dps"&&(at.textContent=Se),rt.forEach(r),zt=b(T),z=a(T,"DIV",{class:!0});var Tt=f(z);_t=a(Tt,"H2",{class:!0,"data-svelte-h":!0}),I(_t)!=="svelte-pedbfs"&&(_t.textContent=je),be=b(Tt),lt=a(Tt,"DIV",{class:!0});var Yt=f(lt);R=a(Yt,"INPUT",{type:!0,class:!0,placeholder:!0}),me=b(Yt),nt=a(Yt,"BUTTON",{class:!0,"data-svelte-h":!0}),I(nt)!=="svelte-5v6nrg"&&(nt.textContent=Ne),Yt.forEach(r),Ce=b(Tt),ot=a(Tt,"BUTTON",{class:!0,"data-svelte-h":!0}),I(ot)!=="svelte-w96rxa"&&(ot.textContent=Le),Tt.forEach(r),this.h()},h(){e(l,"class","text-xl font-bold mb-4"),e(u,"class","stat-title text-primary-content"),e(o,"class","stat-value"),e(x,"class","stat"),e(y,"class","stats bg-primary text-primary-content mb-10"),e(k,"class","stat-title"),e(g,"class","stat-value"),e(V,"class","stat"),e(K,"class","stat-title"),e(H,"class","stat-value"),e(j,"class","stat"),e(dt,"class","stat-title"),e(bt,"class","stat-value"),e(Q,"class","stat"),e(it,"class","stat-title"),e(mt,"class","stat-value"),e(W,"class","stat"),e(ct,"class","stat-title"),e(Ct,"class","stat-value"),e(X,"class","stat"),e(ut,"class","stat-title"),e(wt,"class","stat-value"),e(Y,"class","stat"),e(vt,"class","stat-title"),e(xt,"class","stat-value"),e(Z,"class","stat"),e(ft,"class","stat-title"),e(Dt,"class","stat-value"),e($,"class","stat"),e(ht,"class","stat-title"),e(yt,"class","stat-value text-secondary"),e(tt,"class","stat bg-base-200"),e(d,"class","stats shadow"),e(n,"class","card bg-base-300 p-6 mb-10"),e(pt,"class","text-xl font-bold mb-4"),e(et,"class","btn btn-primary mb-4"),e(st,"class","btn btn-primary mb-4"),e(at,"class","btn btn-primary mb-4"),e(N,"class","card bg-base-300 p-6 mb-10"),e(_t,"class","text-xl font-bold mb-4"),e(R,"type","text"),e(R,"class","input input-bordered w-full join-item "),e(R,"placeholder","Enter deletion code"),e(nt,"class","btn btn-error join-item"),e(lt,"class","join mb-4"),e(ot,"class","btn btn-error"),e(z,"class","card bg-base-300 p-6 mb-10")},m(T,E){L(T,n,E),t(n,l),t(n,m),t(n,y),t(y,x),t(x,u),t(x,w),t(x,o),t(o,i),t(n,c),t(n,d),t(d,V),t(V,k),t(V,F),t(V,g),t(g,O),t(d,P),t(d,j),t(j,K),t(j,D),t(j,H),t(H,Ut),t(d,$t),t(d,Q),t(Q,dt),t(Q,te),t(Q,bt),t(bt,St),t(d,ee),t(d,W),t(W,it),t(W,se),t(W,mt),t(mt,jt),t(d,ae),t(d,X),t(X,ct),t(X,le),t(X,Ct),t(Ct,Nt),t(d,ne),t(d,Y),t(Y,ut),t(Y,oe),t(Y,wt),t(wt,Lt),t(d,re),t(d,Z),t(Z,vt),t(Z,de),t(Z,xt),t(xt,Ot),t(d,ie),t(d,$),t($,ft),t($,ce),t($,Dt),t(Dt,Pt),t(d,ue),t(d,tt),t(tt,ht),t(tt,ve),t(tt,yt),t(yt,fe),L(T,Ft,E),L(T,N,E),t(N,pt),t(N,he),t(N,et),t(N,pe),t(N,st),t(N,_e),t(N,at),L(T,zt,E),L(T,z,E),t(z,_t),t(z,be),t(z,lt),t(lt,R),Zt(R,v[5]),t(lt,me),t(lt,nt),t(z,Ce),t(z,ot),we||(Oe=[G(et,"click",v[8]),G(st,"click",v[11]),G(at,"click",v[9]),G(R,"input",v[17]),G(nt,"click",v[10]),G(ot,"click",v[18])],we=!0)},p(T,E){E&1&&J(i,T[0]),E&2&&S!==(S=T[1]._+"")&&J(O,S),E&2&&B!==(B=T[1].p+"")&&J(Ut,B),E&2&&Vt!==(Vt=T[1].b+"")&&J(St,Vt),E&2&&Et!==(Et=T[1].l+"")&&J(jt,Et),E&2&&kt!==(kt=T[1].a+"")&&J(Nt,kt),E&2&&gt!==(gt=T[1].n+"")&&J(Lt,gt),E&2&&At!==(At=T[1].pbla+"")&&J(Ot,At),E&2&&Bt!==(Bt=T[1].pblan+"")&&J(Pt,Bt),E&32&&R.value!==T[5]&&Zt(R,T[5])},d(T){T&&(r(n),r(Ft),r(N),r(zt),r(z)),we=!1,xe(Oe)}}}function fs(v){let n;return{c(){n=s("div"),this.h()},l(l){n=a(l,"DIV",{class:!0}),f(n).forEach(r),this.h()},h(){e(n,"class","loading loading-spinner svelte-dr9f7i")},m(l,h){L(l,n,h)},p:Ye,d(l){l&&r(n)}}}function Xe(v){let n,l,h,m,y="Are you sure?",x,u,p="This action will delete all data permanently. This cannot be undone.",w,o,i,c="Cancel",d,V,k="Delete All",U,F;return{c(){n=s("div"),l=s("div"),h=s("div"),m=s("h3"),m.textContent=y,x=_(),u=s("p"),u.textContent=p,w=_(),o=s("div"),i=s("button"),i.textContent=c,d=_(),V=s("button"),V.textContent=k,this.h()},l(g){n=a(g,"DIV",{class:!0});var S=f(n);l=a(S,"DIV",{class:!0});var O=f(l);h=a(O,"DIV",{class:!0});var P=f(h);m=a(P,"H3",{class:!0,"data-svelte-h":!0}),I(m)!=="svelte-17aako"&&(m.textContent=y),x=b(P),u=a(P,"P",{"data-svelte-h":!0}),I(u)!=="svelte-1ictmva"&&(u.textContent=p),w=b(P),o=a(P,"DIV",{class:!0});var j=f(o);i=a(j,"BUTTON",{class:!0,"data-svelte-h":!0}),I(i)!=="svelte-1xri5vc"&&(i.textContent=c),d=b(j),V=a(j,"BUTTON",{class:!0,"data-svelte-h":!0}),I(V)!=="svelte-1ymwvkc"&&(V.textContent=k),j.forEach(r),P.forEach(r),O.forEach(r),S.forEach(r),this.h()},h(){e(m,"class","font-bold text-lg"),e(i,"class","btn"),e(V,"class","btn btn-error"),e(o,"class","modal-action"),e(h,"class","modal-box"),e(l,"class","modal modal-open"),e(n,"class","fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50")},m(g,S){L(g,n,S),t(n,l),t(l,h),t(h,m),t(h,x),t(h,u),t(h,w),t(h,o),t(o,i),t(o,d),t(o,V),U||(F=[G(i,"click",v[19]),G(V,"click",v[12])],U=!0)},p:Ye,d(g){g&&r(n),U=!1,xe(F)}}}function hs(v){let n,l,h,m,y,x,u={};l=new is({props:u}),v[15](l);function p(c,d){return c[3]?cs:us}let w=p(v),o=w(v),i=v[6]&&Xe(v);return{c(){n=s("div"),as(l.$$.fragment),h=_(),o.c(),m=_(),i&&i.c(),y=We(),this.h()},l(c){n=a(c,"DIV",{class:!0});var d=f(n);ls(l.$$.fragment,d),d.forEach(r),h=b(c),o.l(c),m=b(c),i&&i.l(c),y=We(),this.h()},h(){e(n,"class","fixed top-0 left-1/3 w-1/3 h-10")},m(c,d){L(c,n,d),ns(l,n,null),L(c,h,d),o.m(c,d),L(c,m,d),i&&i.m(c,d),L(c,y,d),x=!0},p(c,[d]){const V={};l.$set(V),w===(w=p(c))&&o?o.p(c,d):(o.d(1),o=w(c),o&&(o.c(),o.m(m.parentNode,m))),c[6]?i?i.p(c,d):(i=Xe(c),i.c(),i.m(y.parentNode,y)):i&&(i.d(1),i=null)},i(c){x||(os(l.$$.fragment,c),x=!0)},o(c){rs(l.$$.fragment,c),x=!1},d(c){c&&(r(n),r(h),r(m),r(y)),v[15](null),ds(l),o.d(c),i&&i.d(c)}}}const ps="gender24";function _s(v,n,l){let h=0,m={_:0,p:0,b:0,l:0,a:0,n:0,pbla:0,pblan:0},y=!1,x=!1,u="",p="",w=!1,o;const i=async()=>{l(2,y=!0);try{const C=await fetch(`${It}/stats`),D=await C.json();C.ok?(l(0,h=D.users),l(1,m={_:D.dataSets.x,p:D.dataSets.p,b:D.dataSets.b,l:D.dataSets.l,a:D.dataSets.a,n:D.dataSets.n,pbla:D.dataSets.pbla,pblan:D.dataSets.pblan})):o.showTypedToast("error",D.message||"Fetching stats failed.")}catch{o.showTypedToast("error","An error occurred. Is your database running / are you connected to network?")}finally{l(2,y=!1)}},c=async()=>{try{const C=await fetch(`${It}/csv`);if(C.ok){const D=await C.blob(),H=window.URL.createObjectURL(D),B=document.createElement("a");B.href=H,B.download="data.csv",document.body.appendChild(B),B.click(),document.body.removeChild(B)}else o.showTypedToast("error","Failed to download CSV.")}catch{o.showTypedToast("warning","An error occurred while downloading CSV.")}},d=async()=>{try{const C=await fetch(`${It}/downloaddb`);if(C.ok){const D=await C.blob(),H=window.URL.createObjectURL(D),B=document.createElement("a");B.href=H,B.download="data.db",document.body.appendChild(B),B.click(),document.body.removeChild(B)}else o.showTypedToast("error","Failed to download DB.")}catch{o.showTypedToast("warning","An error occurred while downloading DB.")}},V=async()=>{try{const C=await fetch(`${It}/removeuser/${p}`,{method:"DELETE"}),D=await C.text();C.ok?(o.showTypedToast("success","User data deleted successfully."),i()):C.status===404?o.showTypedToast("error","User not found."):o.showTypedToast("error",D||"Failed to delete dataset.")}catch{o.showTypedToast("warning","An error occurred while deleting the dataset.")}},k=async()=>{try{const C=await fetch(`${It}/backup`),D=await C.text();C.ok?o.showTypedToast("success",D||"Backup created successfully."):o.showTypedToast("error",D||"Failed to create backup.")}catch(C){console.log(C),o.showTypedToast("warning","An error occurred while creating the backup.")}},U=async()=>{try{const C=await fetch(`${It}/everything`,{method:"DELETE"}),D=await C.text();C.ok?o.showTypedToast("success",D||"All data deleted successfully."):o.showTypedToast("error",D||"Failed to delete all data."),l(6,w=!1)}catch{o.showTypedToast("warning","An error occurred while deleting all data.")}};$e(()=>{x&&i()});const F=()=>{u===ps?(l(3,x=!0),i()):o.showTypedToast("error","Incorrect password. Please try again.")},g=()=>Object.values(m).reduce((C,D)=>C+D,0);function S(C){ts[C?"unshift":"push"](()=>{o=C,l(7,o)})}function O(){u=this.value,l(4,u)}function P(){p=this.value,l(5,p)}return[h,m,y,x,u,p,w,o,c,d,V,k,U,F,g,S,O,P,()=>l(6,w=!0),()=>l(6,w=!1)]}class xs extends es{constructor(n){super(),ss(this,n,_s,hs,Ze,{})}}export{xs as component};
