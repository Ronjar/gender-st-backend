import{s as T,e as b,x as S,a as w,c as _,b as y,y as q,f as h,d as x,g as A,h as C,i as N,j as f,n as v,o as I,m as j,G as m}from"../chunks/scheduler.1dHxLCaq.js";import{S as O,i as P}from"../chunks/index.BwwAWpwv.js";import{r as E,u as V,p as B,q as D,b as G,g as k}from"../chunks/store.DO6jdtwO.js";import{g as H}from"../chunks/entry.eBlFtu3z.js";function $(d){let t,a,l,i;return{c(){t=b("button"),a=S("Next round"),this.h()},l(o){t=_(o,"BUTTON",{class:!0});var s=y(t);a=q(s,"Next round"),s.forEach(h),this.h()},h(){C(t,"class","btn btn-primary  svelte-1kbih5k"),t.disabled=L},m(o,s){N(o,t,s),f(t,a),l||(i=j(t,"click",d[2]),l=!0)},p:v,d(o){o&&h(t),l=!1,i()}}}function J(d){let t,a,l=d[1]()+"",i,o,s,c="Results are submitted any moment.",p,e=d[0]&&$(d);return{c(){t=b("div"),a=b("h1"),i=S(l),o=w(),s=b("p"),s.textContent=c,p=w(),e&&e.c(),this.h()},l(r){t=_(r,"DIV",{class:!0});var n=y(t);a=_(n,"H1",{});var u=y(a);i=q(u,l),u.forEach(h),o=x(n),s=_(n,"P",{"data-svelte-h":!0}),A(s)!=="svelte-nw9n35"&&(s.textContent=c),p=x(n),e&&e.l(n),n.forEach(h),this.h()},h(){C(t,"class","p-6 max-w-4xl mx-auto bg-base-200 rounded-xl shadow-md space-y-4")},m(r,n){N(r,t,n),f(t,a),f(a,i),f(t,o),f(t,s),f(t,p),e&&e.m(t,null)},p(r,[n]){r[0]?e?e.p(r,n):(e=$(r),e.c(),e.m(t,null)):e&&(e.d(1),e=null)},i:v,o:v,d(r){r&&h(t),e&&e.d()}}}let L=!1;function M(d,t,a){let l=!1,i;E.subscribe(c=>{i=c}),I(async()=>{const c=m(V),p=m(B),e=m(D),r=m(G),n=m(k);try{const u=await fetch("http://localhost:6969/addset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:c,gamifiedElements:n,pretestAnswers:p,questions:e,posttestAnswers:r})});if(!u.ok)throw new Error("Network response was not ok");const g=await u.json();E.set(g.round),k.set(g.gamifiedElements),g.round>0&&a(0,l=!0)}catch(u){console.error("Error uploading data:",u)}});function o(){if(i<3)return"End of study part "+i}return[l,o,async()=>{H("pretest")}]}class K extends O{constructor(t){super(),P(this,t,M,J,T,{})}}export{K as component};
